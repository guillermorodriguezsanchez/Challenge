{"ast":null,"code":"import { myFunction } from \"../components/checkOnline\";\nimport { addProductOn, addProductOff } from \"../controllers/addProduct\";\nimport { getProductOff, getProductsOn } from \"../controllers/getProduct\";\n\n// myFunction -> component to check if the user is online or offline\nconst check = myFunction();\nexport const addProduct = product => {\n  if (check) {\n    console.log(check);\n    // add a product if your are online\n    addProductOn(product);\n  } else {\n    console.log(check);\n    // add a product in the localStorage if your are offline\n    addProductOff(product);\n  }\n};\nexport const getProduct = async () => {\n  if (check) {\n    // Get products from the Back End -> online\n    const res = await getProductsOn();\n\n    // SYNC\n    syncronised();\n    return res;\n  } else {\n    const res = getProductOff();\n    // Get products from the LocalStorage -> offline\n    return res;\n  }\n};\n\n// Check if is already SYNC\nconst sync = false;\nexport const syncronised = async () => {\n  // Check if the user is online or not\n  if (check) {\n    // If he is online GET products from LocalStorage\n    let productsOff = getProductOff();\n\n    // GET products from Back End\n    let productsOn = await getProductsOn();\n    console.log(\"GET products ON:\", productsOn);\n    let b = false;\n    let c = 0;\n\n    // Check if the product is already updated\n    try {\n      c++;\n      for (let i = 0; i < productsOff.length; i++) {\n        // HOLA\n        for (let j = 0; j < productsOn.length; j++) {\n          // b , , hola\n          if (productsOff[i].name == productsOn[j].name) {\n            b = true;\n            break;\n          } else {\n            b = false;\n          }\n        }\n        console.log(\"i:\", i);\n        console.log(productsOff[i]);\n        console.log(\"b:\", b);\n        if (b == false) {\n          await addProductOn(productsOff[i]);\n        }\n      }\n      console.log(\"cont:\", c);\n    } catch (error) {\n      console.log(error.message);\n    }\n  } else {\n    console.log(\"offline\");\n  }\n};","map":{"version":3,"names":["myFunction","addProductOn","addProductOff","getProductOff","getProductsOn","check","addProduct","product","console","log","getProduct","res","syncronised","sync","productsOff","productsOn","b","c","i","length","j","name","error","message"],"sources":["C:/Users/guill/Desktop/SOFTWARE MASTER/1 YEAR 1 SEMESTER/Advanced Software Design Techniques/Challenge/RestApi_App_Challenge/FrontEnd/challenge/src/middleware/middleware.js"],"sourcesContent":["import { myFunction } from \"../components/checkOnline\";\r\nimport { addProductOn, addProductOff } from \"../controllers/addProduct\";\r\nimport { getProductOff, getProductsOn } from \"../controllers/getProduct\";\r\n\r\n\r\n// myFunction -> component to check if the user is online or offline\r\nconst check = myFunction();\r\n\r\nexport const addProduct = (product) => {\r\n \r\n    if(check){\r\n        console.log(check);\r\n        // add a product if your are online\r\n         addProductOn(product);\r\n\r\n    }else{\r\n        console.log(check);\r\n        // add a product in the localStorage if your are offline\r\n        addProductOff(product);\r\n\r\n    }\r\n}\r\n\r\nexport const getProduct = async() => {\r\n    \r\n    if(check){\r\n       \r\n        // Get products from the Back End -> online\r\n        const res =  await getProductsOn();\r\n\r\n        // SYNC\r\n        syncronised();\r\n        return res;\r\n    }else{\r\n        const res = getProductOff();\r\n        // Get products from the LocalStorage -> offline\r\n        return res;    \r\n    }  \r\n}\r\n\r\n\r\n// Check if is already SYNC\r\nconst sync = false;\r\n\r\nexport const syncronised = async() => {\r\n\r\n    // Check if the user is online or not\r\n    if(check){\r\n        \r\n        // If he is online GET products from LocalStorage\r\n        let productsOff = getProductOff();\r\n\r\n        // GET products from Back End\r\n        let productsOn = await getProductsOn();\r\n        console.log(\"GET products ON:\",productsOn);\r\n\r\n\r\n        let b = false;\r\n\r\n        let c = 0;\r\n\r\n        \r\n        // Check if the product is already updated\r\n        try {\r\n\r\n            c ++;\r\n            for(let i = 0; i < productsOff.length; i++){ // HOLA\r\n                for(let j = 0 ; j < productsOn.length ; j++){ // b , , hola\r\n                    if(productsOff[i].name == productsOn[j].name){\r\n                        b = true;\r\n                        break;\r\n                    }else{\r\n                        b = false;\r\n                    }\r\n                    \r\n                }\r\n                console.log(\"i:\", i);\r\n                console.log(productsOff[i]);\r\n                console.log(\"b:\", b);\r\n                if(b == false){\r\n                    \r\n                   await addProductOn(productsOff[i]);\r\n                }\r\n            }\r\n\r\n        console.log(\"cont:\", c);\r\n \r\n        } catch (error) {\r\n\r\n            console.log(error.message);\r\n            \r\n        }    \r\n    }else{\r\n        console.log(\"offline\");\r\n    }\r\n}\r\n\r\n\r\n\r\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,2BAA2B;AACtD,SAASC,YAAY,EAAEC,aAAa,QAAQ,2BAA2B;AACvE,SAASC,aAAa,EAAEC,aAAa,QAAQ,2BAA2B;;AAGxE;AACA,MAAMC,KAAK,GAAGL,UAAU,EAAE;AAE1B,OAAO,MAAMM,UAAU,GAAIC,OAAO,IAAK;EAEnC,IAAGF,KAAK,EAAC;IACLG,OAAO,CAACC,GAAG,CAACJ,KAAK,CAAC;IAClB;IACCJ,YAAY,CAACM,OAAO,CAAC;EAE1B,CAAC,MAAI;IACDC,OAAO,CAACC,GAAG,CAACJ,KAAK,CAAC;IAClB;IACAH,aAAa,CAACK,OAAO,CAAC;EAE1B;AACJ,CAAC;AAED,OAAO,MAAMG,UAAU,GAAG,YAAW;EAEjC,IAAGL,KAAK,EAAC;IAEL;IACA,MAAMM,GAAG,GAAI,MAAMP,aAAa,EAAE;;IAElC;IACAQ,WAAW,EAAE;IACb,OAAOD,GAAG;EACd,CAAC,MAAI;IACD,MAAMA,GAAG,GAAGR,aAAa,EAAE;IAC3B;IACA,OAAOQ,GAAG;EACd;AACJ,CAAC;;AAGD;AACA,MAAME,IAAI,GAAG,KAAK;AAElB,OAAO,MAAMD,WAAW,GAAG,YAAW;EAElC;EACA,IAAGP,KAAK,EAAC;IAEL;IACA,IAAIS,WAAW,GAAGX,aAAa,EAAE;;IAEjC;IACA,IAAIY,UAAU,GAAG,MAAMX,aAAa,EAAE;IACtCI,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAACM,UAAU,CAAC;IAG1C,IAAIC,CAAC,GAAG,KAAK;IAEb,IAAIC,CAAC,GAAG,CAAC;;IAGT;IACA,IAAI;MAEAA,CAAC,EAAG;MACJ,KAAI,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,WAAW,CAACK,MAAM,EAAED,CAAC,EAAE,EAAC;QAAE;QACzC,KAAI,IAAIE,CAAC,GAAG,CAAC,EAAGA,CAAC,GAAGL,UAAU,CAACI,MAAM,EAAGC,CAAC,EAAE,EAAC;UAAE;UAC1C,IAAGN,WAAW,CAACI,CAAC,CAAC,CAACG,IAAI,IAAIN,UAAU,CAACK,CAAC,CAAC,CAACC,IAAI,EAAC;YACzCL,CAAC,GAAG,IAAI;YACR;UACJ,CAAC,MAAI;YACDA,CAAC,GAAG,KAAK;UACb;QAEJ;QACAR,OAAO,CAACC,GAAG,CAAC,IAAI,EAAES,CAAC,CAAC;QACpBV,OAAO,CAACC,GAAG,CAACK,WAAW,CAACI,CAAC,CAAC,CAAC;QAC3BV,OAAO,CAACC,GAAG,CAAC,IAAI,EAAEO,CAAC,CAAC;QACpB,IAAGA,CAAC,IAAI,KAAK,EAAC;UAEX,MAAMf,YAAY,CAACa,WAAW,CAACI,CAAC,CAAC,CAAC;QACrC;MACJ;MAEJV,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEQ,CAAC,CAAC;IAEvB,CAAC,CAAC,OAAOK,KAAK,EAAE;MAEZd,OAAO,CAACC,GAAG,CAACa,KAAK,CAACC,OAAO,CAAC;IAE9B;EACJ,CAAC,MAAI;IACDf,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;EAC1B;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}